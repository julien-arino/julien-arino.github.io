<!DOCTYPE html> <html lang="en, fr"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Ugly loops versus pretty vectors | Julien Arino </title> <meta name="author" content="Julien Arino"> <meta name="description" content="A comparison of the execution times of loops and vector operations in R using the tictoc library."> <meta name="keywords" content="mathematical biology, mathematical epidemiology, academic-website"> <link rel="stylesheet" href="/renewed-website/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/renewed-website/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/renewed-website/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/renewed-website/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/renewed-website/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://julien-arino.github.io/renewed-website/blog/2019/ugly-loops/"> <script src="/renewed-website/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/renewed-website/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/renewed-website/"> <span class="font-weight-bold">Julien</span> Arino </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/renewed-website/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/renewed-website/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/renewed-website/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/renewed-website/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/renewed-website/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/renewed-website/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/renewed-website/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/renewed-website/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/renewed-website/books/">bookshelf</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/renewed-website/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Ugly loops versus pretty vectors</h1> <p class="post-meta"> Created on July 10, 2019 </p> <p class="post-tags"> <a href="/renewed-website/blog/2019"> <i class="fa-solid fa-calendar fa-sm"></i> 2019 </a>   ·   <a href="/renewed-website/blog/category/simulation"> <i class="fa-solid fa-tag fa-sm"></i> simulation</a>   <a href="/renewed-website/blog/category/r-code"> <i class="fa-solid fa-tag fa-sm"></i> r-code</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>The other day, I posted a prototypical example of use of parLapply, somewhat more advanced than the ones in the documentation; see <a href="https://julien-arino.github.io/blog/2019/skel-parLapply">here</a>.</p> <p>Well, part of the example I gave uses one of my most biggest coding pet peaves, something that I have been fighting against ever since my MatLab days: the dreaded unnecessary <em>for loop</em>. As I was teaching myself the use of the <code class="language-plaintext highlighter-rouge">tictoc</code> library, I thought I would illustrate both.</p> <p>To keep in the spirit of the example in the post mentioned, we set up variations of up to two parameters, \(\beta\) and \(S_0\). We set base values for these parameters.</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
</span><span class="n">param</span><span class="o">$</span><span class="n">beta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1e-6</span><span class="w">
</span><span class="n">param</span><span class="o">$</span><span class="n">S0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10000</span></code></pre></figure> <p>We will try different ranges of number of cases.</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">nb_sims</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">10000</span><span class="p">,</span><span class="m">50000</span><span class="p">,</span><span class="m">100000</span><span class="p">,</span><span class="m">500000</span><span class="p">,</span><span class="m">1000000</span><span class="p">,</span><span class="m">5000000</span><span class="p">,</span><span class="m">10000000</span><span class="p">)</span></code></pre></figure> <p>Now loop on the number of cases. First, clear the <code class="language-plaintext highlighter-rouge">tictoc</code> log, in case it already exists. In each loop, we take note of the time taken to accomplish each group of operations.</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">tictoc</span><span class="o">::</span><span class="n">tic.clearlog</span><span class="p">()</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">nb_sims</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">

</span><span class="c1"># Just for info in case things get longish</span><span class="w">

</span><span class="n">print</span><span class="p">(</span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"%d - %d"</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">which</span><span class="p">(</span><span class="n">nb_sims</span><span class="o">==</span><span class="n">n</span><span class="p">)))</span><span class="w">

</span><span class="c1"># The loop version</span><span class="w">

</span><span class="n">tictoc</span><span class="o">::</span><span class="n">tic</span><span class="p">(</span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"loop\_%d"</span><span class="p">,</span><span class="n">n</span><span class="p">))</span><span class="w">
</span><span class="n">param_vary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="n">param_vary</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
</span><span class="n">param_vary</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="o">$</span><span class="n">beta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runif</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1e-9</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1e-4</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="m">+1</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="m">2</span><span class="o">*</span><span class="n">n</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">param_vary</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
    </span><span class="n">param_vary</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="o">$</span><span class="n">S0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runif</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100000</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="m">2</span><span class="o">*</span><span class="n">n</span><span class="m">+1</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="m">3</span><span class="o">*</span><span class="n">n</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="n">param_vary</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">()</span><span class="w">
</span><span class="n">param_vary</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="o">$</span><span class="n">beta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runif</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1e-9</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1e-4</span><span class="p">)</span><span class="w">
    </span><span class="n">param_vary</span><span class="p">[[</span><span class="n">i</span><span class="p">]]</span><span class="o">$</span><span class="n">S0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runif</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100000</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1"># Vector version</span><span class="w">

</span><span class="n">tictoc</span><span class="o">::</span><span class="n">toc</span><span class="p">(</span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">quiet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="n">tictoc</span><span class="o">::</span><span class="n">tic</span><span class="p">(</span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"vect\_%d"</span><span class="p">,</span><span class="n">n</span><span class="p">))</span><span class="w">
</span><span class="n">param_vary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rbind</span><span class="p">(</span><span class="n">cbind</span><span class="p">(</span><span class="n">runif</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1e-9</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1e-4</span><span class="p">),</span><span class="w">
</span><span class="nf">rep</span><span class="p">(</span><span class="n">param</span><span class="o">$</span><span class="n">S0</span><span class="p">,</span><span class="n">n</span><span class="p">)),</span><span class="w">
                      </span><span class="n">cbind</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="n">param</span><span class="o">$</span><span class="n">beta</span><span class="p">,</span><span class="n">n</span><span class="p">),</span><span class="w">
</span><span class="n">runif</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100000</span><span class="p">)),</span><span class="w">
</span><span class="n">cbind</span><span class="p">(</span><span class="n">runif</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1e-9</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1e-4</span><span class="p">),</span><span class="w">
</span><span class="n">runif</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100000</span><span class="p">)))</span><span class="w">
</span><span class="n">colnames</span><span class="p">(</span><span class="n">param_vary</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"beta"</span><span class="p">,</span><span class="s2">"S0"</span><span class="p">)</span><span class="w">
</span><span class="n">tictoc</span><span class="o">::</span><span class="n">toc</span><span class="p">(</span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">quiet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">

</span><span class="c1"># Convert vector to list</span><span class="w">

</span><span class="n">tictoc</span><span class="o">::</span><span class="n">tic</span><span class="p">(</span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"conv\_%d"</span><span class="p">,</span><span class="n">n</span><span class="p">))</span><span class="w">
</span><span class="n">param_vary</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="nf">seq_len</span><span class="p">(</span><span class="n">nrow</span><span class="p">(</span><span class="n">param_vary</span><span class="p">)),</span><span class="w">
</span><span class="k">function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="n">param_vary</span><span class="p">[</span><span class="n">i</span><span class="p">,])</span><span class="w">
</span><span class="n">tictoc</span><span class="o">::</span><span class="n">toc</span><span class="p">(</span><span class="n">log</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">quiet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="n">log.lst</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tictoc</span><span class="o">::</span><span class="n">tic.log</span><span class="p">(</span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span></code></pre></figure> <p>The following is adapted from the <code class="language-plaintext highlighter-rouge">tictoc</code> documentation.</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">timings</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">cbind</span><span class="p">(</span><span class="n">nb_sims</span><span class="p">,</span><span class="w">
</span><span class="n">matrix</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">lapply</span><span class="p">(</span><span class="n">log.lst</span><span class="p">,</span><span class="w">
</span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">toc</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">tic</span><span class="p">)),</span><span class="w">
</span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">nb_sims</span><span class="p">),</span><span class="w">
</span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w">
</span><span class="n">byrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">))</span><span class="w">
</span><span class="n">colnames</span><span class="p">(</span><span class="n">timings</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"n"</span><span class="p">,</span><span class="s2">"loopT"</span><span class="p">,</span><span class="s2">"vectT"</span><span class="p">,</span><span class="s2">"convT"</span><span class="p">)</span><span class="w">
</span><span class="n">timings</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">timings</span><span class="p">)</span></code></pre></figure> <p>Add a few additional pieces of information about timing: the total time in the second case (making the vectors and converting them to lists) as well as acceleration factors when making the vector and in total of the second method.</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">timings</span><span class="o">$</span><span class="n">sumVect</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">timings</span><span class="o">$</span><span class="n">vectT</span><span class="o">+</span><span class="n">timings</span><span class="o">$</span><span class="n">convT</span><span class="w">
</span><span class="n">timings</span><span class="o">$</span><span class="n">multVect</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">timings</span><span class="o">$</span><span class="n">loopT</span><span class="o">/</span><span class="n">timings</span><span class="o">$</span><span class="n">vectT</span><span class="p">,</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="n">timings</span><span class="o">$</span><span class="n">multSVect</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">timings</span><span class="o">$</span><span class="n">loopT</span><span class="o">/</span><span class="n">timings</span><span class="o">$</span><span class="n">sumVect</span><span class="p">,</span><span class="m">2</span><span class="p">)</span></code></pre></figure> <p>Finally, use <code class="language-plaintext highlighter-rouge">knitr</code> to make a decent looking table of the results.</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">knitr</span><span class="o">::</span><span class="n">kable</span><span class="p">(</span><span class="n">timings</span><span class="p">,</span><span class="n">format.args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">big.mark</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">","</span><span class="p">,</span><span class="n">scientific</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">))</span></code></pre></figure> <p>Here are the results:</p> <table> <thead> <tr> <th style="text-align: right">n</th> <th style="text-align: right">loopT</th> <th style="text-align: right">vectT</th> <th style="text-align: right">convT</th> <th style="text-align: right">sumVect</th> <th style="text-align: right">multVect</th> <th style="text-align: right">multSVect</th> </tr> </thead> <tbody> <tr> <td style="text-align: right">10,000</td> <td style="text-align: right">0.138</td> <td style="text-align: right">0.001</td> <td style="text-align: right">0.046</td> <td style="text-align: right">0.047</td> <td style="text-align: right">138.00</td> <td style="text-align: right">2.94</td> </tr> <tr> <td style="text-align: right">50,000</td> <td style="text-align: right">0.545</td> <td style="text-align: right">0.006</td> <td style="text-align: right">0.327</td> <td style="text-align: right">0.333</td> <td style="text-align: right">90.83</td> <td style="text-align: right">1.64</td> </tr> <tr> <td style="text-align: right">100,000</td> <td style="text-align: right">1.207</td> <td style="text-align: right">0.008</td> <td style="text-align: right">0.346</td> <td style="text-align: right">0.354</td> <td style="text-align: right">150.88</td> <td style="text-align: right">3.41</td> </tr> <tr> <td style="text-align: right">500,000</td> <td style="text-align: right">8.587</td> <td style="text-align: right">0.453</td> <td style="text-align: right">1.712</td> <td style="text-align: right">2.165</td> <td style="text-align: right">18.96</td> <td style="text-align: right">3.97</td> </tr> <tr> <td style="text-align: right">1,000,000</td> <td style="text-align: right">19.130</td> <td style="text-align: right">1.597</td> <td style="text-align: right">3.832</td> <td style="text-align: right">5.429</td> <td style="text-align: right">11.98</td> <td style="text-align: right">3.52</td> </tr> <tr> <td style="text-align: right">5,000,000</td> <td style="text-align: right">122.943</td> <td style="text-align: right">4.359</td> <td style="text-align: right">22.746</td> <td style="text-align: right">27.105</td> <td style="text-align: right">28.20</td> <td style="text-align: right">4.54</td> </tr> <tr> <td style="text-align: right">10,000,000</td> <td style="text-align: right">277.161</td> <td style="text-align: right">8.648</td> <td style="text-align: right">40.261</td> <td style="text-align: right">48.909</td> <td style="text-align: right">32.05</td> <td style="text-align: right">5.67</td> </tr> </tbody> </table> <p>Clearly, it would be better here to use a parallel version of <code class="language-plaintext highlighter-rouge">apply</code> operating on matrix rows than on lists, since this would not require a further conversion to a list. But the cases are not always this structured.</p> <p>Ah, yes, one last thing: when \(n\) is large, some of the variables can become quite large (the last matrix by itself is 10.1 Gb). Unless you have pretty decent RAM, don’t try this at home.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://blog.google/technology/ai/google-gemini-update-flash-ai-assistant-io-2024/" target="_blank" rel="external nofollow noopener">Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://medium.com/@al-folio/displaying-external-posts-on-your-al-folio-blog-b60a1d241a0a?source=rss-17feae71c3c4------2" target="_blank" rel="external nofollow noopener">Displaying External Posts on Your al-folio Blog</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/renewed-website/blog/2023/R-on-raspberri-pi-and-more-than-128-threads/">Compiling R on a Raspberry Pi and getting rid of the 128 threads limitation</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/renewed-website/blog/2022/petit-cours-epi-math/">Un petit cours d'épidémiologie mathématique</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/renewed-website/blog/2022/3MC-short-course-math-epi/">A short Mathematical Epidemiology course</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Julien Arino. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/renewed-website/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/renewed-website/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/renewed-website/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/renewed-website/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/renewed-website/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/renewed-website/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/renewed-website/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/renewed-website/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/renewed-website/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/renewed-website/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/renewed-website/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/renewed-website/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/renewed-website/assets/js/search-data.js"></script> <script src="/renewed-website/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>